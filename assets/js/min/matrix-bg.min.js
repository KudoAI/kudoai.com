import datGui from"https://cdn.skypack.dev/dat.gui@0.7.7";let state={fps:13,size:12,charset:"0123456789ABCDEF",secDelayTilColorChange:10,hue:120,saturation:3,lightness:54},gui=new datGui.GUI,fpsCtrl=gui.add(state,"fps").min(1).max(120).step(1),sizeCtrl=gui.add(state,"size").min(1).max(120).step(1),canvas=document.querySelector("canvas"),ctx=canvas.getContext("2d");gui.add(state,"charset");let w,h,p,resize=()=>{w=canvas.width=innerWidth,h=canvas.height=innerHeight,p=Array(Math.ceil(w/state.size)).fill(0)},random=(window.addEventListener("resize",resize),sizeCtrl.onFinishChange(resize),resize(),t=>t[Math.floor(Math.random()*t.length)]),draw=()=>{Date.now()-startTime>=1e3*state.secDelayTilColorChange&&(state.hue=(state.hue+1)%360,state.saturation=100+50*Math.sin(state.hue*Math.PI/180),state.lightness=50+25*Math.cos(state.hue*Math.PI/180));var t=`hsl(${state.hue}, ${state.saturation}%, ${state.lightness}%)`;ctx.fillStyle="rgba(0,0,0,.05)",ctx.fillRect(0,0,w,h),ctx.fillStyle=t,ctx.font=state.size+"px sans-serif";for(let t=0;t<p.length;t++){var e=p[t];ctx.fillText(random(state.charset),t*state.size,e),p[t]=e>=h||e>=1e4*Math.random()?0:e+state.size}},startTime=Date.now(),interval=setInterval(draw,1e3/state.fps);fpsCtrl.onFinishChange(t=>{interval&&clearInterval(interval),interval=setInterval(draw,1e3/t)});